NoOp {
 name Speedy_Script
 selected true
 addUserKnob {20 User}
 addUserKnob {22 igroup l "Import script into Group" t "Import script into group for convinience" T "#IMPORT SCRIPT INTO GROUP\n\ndef importScriptFunction(filePath):\n    \n    fileName = (os.path.basename(filePath))\n    size = os.path.getsize(filePath)\n    sizeMB = size/(1024*1024)\n    \n    import_ok = True\n    \n    #if file is bigger than 8MB, give a message\n    if size > 8000000:\n        import_ok = False\n        if nuke.ask(\"File is quite BIG, \" + str(sizeMB) + \"MB and importing could take some seconds. \\nDo you want to continue? \\nIn case, don't close Nuke or move anything\"):\n            import_ok = True\n        \n    if import_ok == True:\n    \n        #LOCALIZATION PAUSE\n        nuke.localization.pauseLocalization()\n    \n        #CREATE GROUP\n        group = nuke.createNode(\"Group\")\n        \n        #CUSTOMIZE NODE\n        fileName = fileName.replace('.nk','')\n        fileName = fileName.replace(' ','_')\n        \n        group.knob('name').setValue(\"SCRIPT_IMPORTED_\" + fileName)\n        #group.knob('label').setValue(fileName + '\\n' + filePath)\n        group.knob('label').setValue(filePath)\n        group.knob('note_font_size').setValue(20)\n        group.knob('tile_color').setValue(0x99000000)\n        group.knob('note_font_color').setValue(4294967041)\n        group.knob('note_font').setValue(\"bold\")\n    \n        groupNode = nuke.toNode(group.name())\n        groupNode.begin()\n        nuke.nodePaste(filePath)\n        groupNode.end()\n        \n        nuke.showDag(groupNode)\n\nscriptPath = nuke.getFilename(\"Please Select Root Folder\")\nimportScriptFunction(scriptPath)" +STARTLINE}
 addUserKnob {22 fGroup l "Find Group" -STARTLINE T "#FIND GROUP IN MY SCRIPT\ndef findGroupFunction():\n    found = False\n\n    #deselect all Nodes\n    nuke.selectAll()\n    nuke.invertSelection()\n\n    #look for Groups start with \"SCRIPT_IMPORTED\"\n    for node in nuke.allNodes():\n        nodeClass = node.Class()\n        nodeName =  str(node\['name'].getValue())\n        print(nodeName)\n\n        if nodeClass == \"Group\" and nodeName.startswith(\"SCRIPT_IMPORTED\"):\n            node.setSelected(True)\n            nuke.zoom( 2, \[ node.xpos(), node.ypos() ])\n            found = True\n            break\n\n    if found == False:\n        nuke.message(\"No Imported Script into Group has been found!\")\n\n\nfindGroupFunction()\n"}
 addUserKnob {22 eGroup l "Export Group" T "#EXPORT GIZMO INTO GROUP\ndef exportScriptFunction():\n    nodes = nuke.selectedNodes()    # GET SELECTED NODES\n    amount = len( nodes )    # GET NUMBER OF SELECTED NODES\n    \n    \n    if amount == 1:\n        node = nuke.selectedNode()\n        xPos = node.xpos()\n        yPos = node.ypos()\n    \n        filePath = nuke.getFilename('Enter Path and save Group', '*.nk *.gizmo')\n        \n        if filePath is not None:\n            fileName = (os.path.basename(filePath))\n            \n            #check format\n            formato = \".gizmo\" # or \".nk\"\n\n\n\n            #if user doesn't put the extension\n            if not (filePath.endswith(\".nk\") or filePath.endswith(\".gizmo\")):\n                filePath = filePath + formato\n            \n            \n            \n            #SAVE FILE\n            nuke.nodeCopy(filePath)\n            #nuke.nodeCopy(\"%clipboard%\")\n            \n            \n            data = \"\"\n            with open(filePath, \"r\") as f:\n                data = f.read()\n            \n            #check name\n            try:\n                nodeName = str(node\['name'].getValue())\n                nodeName = nodeName.replace(\" \", \"_\")   #remove spaces with underscore\n                head, tail = os.path.split(filePath)\n                fileName, extension = os.path.splitext(tail)\n                fileName = fileName.replace(\" \", \"_\")    #remove spaces with underscore\n                if fileName != nodeName:\n                    if nuke.ask(\"FileName and NodeName are different. Do you want to change the NodeName as '\" + fileName + \"' ?\"):\n                        data = data.replace(\"name \" + nodeName + \"\\n\", \"name \" + fileName + \"\\n\", 1)\n            except:\n                print(\"Error with the Name during the export\")\n            \n            \n            #check if I have to delete 2 or 3 lines\n            if \"push \$cut_paste_input\" in data:\n                data = data.split(\"\\n\",3)\[3]\n            else:\n                data = data.split(\"\\n\",2)\[2]\n\n            #replace gizmo with group\n            #data = data.replace(\"Gizmo \{ \\n\", \"Group \{ \\n\", 1)\n            data = data.replace(\"Gizmo\", \"Group\", 1)\n\n            #delete just the first line who contains \"xpos\" and \"ypos\"\n            data = data.replace(\" xpos \" + str(xPos) + \"\\n\", \"\", 1)\n            data = data.replace(\" ypos \" + str(yPos) + \"\\n\", \"\", 1)\n    \n            with open(filePath, \"w\") as f:\n                f.write(data)\n    \n    else:\n        nuke.message(\"Select only one node\")\n\n\nexportScriptFunction()" +STARTLINE}
}
